<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <title>Respondents using SHA1 | RoQua Developer Docs</title>
  <link href="/developer/assets/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/developer/assets/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/developer/assets/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/developer/assets/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/developer/assets/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
  <link href="//cdnjs.cloudflare.com/ajax/libs/octicons/2.1.2/octicons.min.css" media="screen" rel="stylesheet" type="text/css">
  <script src="/developer/assets/js/jquery.js" type="text/javascript"></script>
  <script src="/developer/assets/js/documentation.js" type="text/javascript"></script>
  <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
</head>





<body class="rom">
  <div id="header-wrapper">
  <div id="header">
    <div>
      <a class="logo" href="/developer/">RoQua Developer</a>
      <ul class="nav">
        <li class="home"><a href="/developer/">Overview</a></li>
        <li><a href="/developer/core/">Core</a></li>
        <li class="active"><a href="/developer/rom/">ROM</a></li>
        <li><a href="/developer/quby/">Quby</a></li>
        <li><a href="http://roqua.nl/contact">Support</a></li>
      </ul>
    </div>
  </div><!-- #header -->
</div><!-- #header-wrapper -->


  <div class="sub-nav">
    <h2>
      <strong>ROM</strong>
      : Respondents using SHA1
      <span class="status status-deprecated">
          deprecated
          </span>
    </h2>
  </div>

  <div id="wrapper">
    <div class="content">
      <p>Automatic login of a patient (or other respondents for a dossier) can be done with a signed URL. <strong>This style of signature is deprecated.</strong></p>

<h2 id="sso-url">SSO URL</h2>

<p>To start completing questionnaires for a given dossier, tell a browser window or frame to navigate to:</p>

<pre><code>https://:ggzname.roqua.nl/client/sso
</code></pre>

<h2 id="required-parameters">Required parameters</h2>

<p>To this URL, you must add a number of query parameters (i.e. <code>?key=value&amp;foo=bar&amp;baz=quux</code>). These parameters are used for specifying the user to be logged in, the dossier to be shown, and authenticating that the request is signed by a valid authority.</p>

<p>The following query parameters are <strong>required</strong>:</p>

<h3 id="version---version-of-the-sso-specification-implemented">
<code>version</code> - Version of the SSO specification implemented</h3>

<p>The value of this parameter should be <code>2</code> if you are implementing the specification you are currently reading. This number will be increased whenever we change the specification in a manner that would break existing implementations. Older versions will remain working unless there are security issues with that version of the spec.</p>

<h3 id="consumerkey---the-api-consumer-key-you-were-issued">
<code>consumer_key</code> - The API consumer key you were issued.</h3>

<p>All parties that should be able to generate valid SSO requests are issued two strings: a <code>consumer_key</code> and a <code>consumer_secret</code>. The consumer key is sent as a parameter, so that we know which secret to use while validating the HMAC for the request. These pairs of keys can be generated in the RoQua Admin. The <code>consumer_secret</code> is only shown once after generating, if you forget the key or secret you must invalide the old pair and generate a new pair.</p>

<h3 id="timestamp---the-unix-time-when-this-request-was-constructed">
<code>timestamp</code> - The Unix time when this request was constructed</h3>

<p>Timestamps are supplied as <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601 formatted strings</a> at the moment the request was generated, which should be easily generated in all programming languages. Note that we reject requests with timestamps that are too far in the past or future, and that it is therefore important to keep the clock of the system generating requests in sync with NTP. Take care to correctly URL-escape this parameter, since the plus-sign in the timestamp otherwise unescapes on our side to a space character which would make the timestamp malformed.</p>

<h3 id="clientid---identifier-for-the-dossier">
<code>clientid</code> - Identifier for the dossier</h3>

<p>This identifies patient dossiers in RoQua. The value given here will also be used in our data exports and in HL7 communication for data associated with this dossier. This dossier must already exist (ie. have been accessed by a professional), otherwise login will fail.</p>

<h3 id="sha1---sha1-digest">
<code>sha1</code> - SHA1 digest.</h3>

<p>In order to make sure that requests cannot be tampered with, we require that all requests are signed with an SHA1. The SHA1 is calculated using a secret key. The secret key is the <code>consumer_secret</code>, a 64 character long string which can be generated in the RoQua Admin module.</p>

<p>The SHA1 is to be calculated using:</p>

<pre><code>CONSUMER_KEY + "|" + CONSUMER_SECRET + "|" + TIMESTAMP + "|" + CLIENTID + "|" + VERSION
</code></pre>

<h2 id="optional-parameters">Optional parameters</h2>

<p>Because the signature is not defined in a way that it signs unknown parameters, this version of the SSO does not support optional parameters. Version 3 will support this.</p>
    </div>

    <div id="js-sidebar" class="sidebar-shell">

      
        <div class="js-toggle-list sidebar-module expandable">
          <ul>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/overview/">Overview</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/overview/authentication/">Authentication</a></li>
                  
                    <li><a href="/developer/rom/overview/libraries/">Libraries</a></li>
                  
                    <li><a href="/developer/rom/overview/rider/">Technical Rider</a></li>
                  
                </ul>
              </li>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/sso/">Single Sign On</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/sso/epd_v3/">EPD v3 (HMAC)</a></li>
                  
                    <li><a href="/developer/rom/sso/client_v2/">Respondents using SHA1</a></li>
                  
                    <li><a href="/developer/rom/sso/client_token/">Respondents using token</a></li>
                  
                </ul>
              </li>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/hl7/">HL7</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/hl7/oru/">HL7 2.4 ORU^R01</a></li>
                  
                    <li><a href="/developer/rom/hl7/a19/">HL7 2.4 QRY^A19</a></li>
                  
                </ul>
              </li>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/global/">Global</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/global/data_exports/">Data Exports</a></li>
                  
                    <li><a href="/developer/rom/global/questionnaires/">Questionnaires</a></li>
                  
                    <li><a href="/developer/rom/global/service_health/">Service Health</a></li>
                  
                </ul>
              </li>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/dossier/">Dossier-specific data</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/dossier/dossiers/">Dossiers</a></li>
                  
                    <li><a href="/developer/rom/dossier/fill_out_requests/">Fill Out Requests</a></li>
                  
                    <li><a href="/developer/rom/dossier/fill_out_sessions/">Fill Out Sessions</a></li>
                  
                    <li><a href="/developer/rom/dossier/protocol_subscriptions/">Protocol Subscriptions</a></li>
                  
                    <li><a href="/developer/rom/dossier/report_calculations/">Report Calculations</a></li>
                  
                    <li><a href="/developer/rom/dossier/responses/">Responses</a></li>
                  
                    <li><a href="/developer/rom/dossier/stats/">Stats</a></li>
                  
                </ul>
              </li>
            
              <li class="js-topic">
                <h3><a href="#" class="js-expand-btn collapsed arrow-btn" data-proofer-ignore></a><a href="/developer/rom/data_export/">Data Export</a></h3>
                <ul class="js-guides">
                  
                    <li><a href="/developer/rom/data_export/nonresponse/">Non-response</a></li>
                  
                    <li><a href="/developer/rom/data_export/responses/">Responses</a></li>
                  
                </ul>
              </li>
            
          </ul>
        </div> <!-- /sidebar-module -->
      

      <div class="sidebar-module notice">
        <p>This website is a <a href="https://github.com/roqua/developer" target="_blank">public GitHub repository</a>. Please help us by forking the project and adding to it.</p>
      </div>

    </div><!-- /sidebar-shell -->
  </div><!-- #wrapper -->

  	<div id="footer" >
    <div class="lower_footer">
      <ul class="footer-cell">
      </ul>

      <span class="footer-cell">
      </span>

      <ul class="footer-cell">
        <li><a href="http://roqua.nl/contact">Contact</a></li>
        <li><a href="https://roqua.zendesk.com">Status</a></li>
        <li><a href="https://roqua.zendesk.com/forums/20271351-Announcements">Release News</a></li>
      </ul>
    </div>

		<div class="wrapper">
			<p>Design &copy; <span class="js-year">2014</span> RoQua. All rights reserved. Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/us/">Creative Commons CC-BY license</a>.<br>Many thanks to <a href="https://developer.github.com/">GitHub</a> for providing a CC-BY licenced repository for us to use and adapt.</p>
		</div>

  </div><!-- /#footer -->

</body>
</html>
